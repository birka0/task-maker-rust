<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="DAG generation and resulting structures for `Execution`s and `File`s."><meta name="keywords" content="rust, rustlang, rust-lang, task_maker_dag"><title>task_maker_dag - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../task_maker_dag/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class="location">Crate task_maker_dag</p><div class="block version"><p>Version 0.4.3</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all task_maker_dag's items</p></a><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#statics">Statics</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class="location"></p><div id="sidebar-vars" data-name="task_maker_dag" data-ty="mod" data-relpath="../"></div></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="">task_maker_dag</a></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/task_maker_dag/lib.rs.html#1-55" title="goto source code">[src]</a></span></h1><div class="docblock"><p>DAG generation and resulting structures for <a href="struct.Execution.html"><code>Execution</code></a>s and
<a href="struct.File.html"><code>File</code></a>s.</p>
<p>A DAG is a series of executions linked together in a non-cyclical way. Every execution has a
list of files as dependencies, when all of them are ready the execution can start. When an
execution is run inside a sandbox by a worker (under some <a href="struct.ExecutionLimits.html"><code>ExecutionLimits</code></a>)
it will produce some output files (including <code>stdout</code> and <code>stderr</code>). Those outputs can be used
as inputs for the next executions.</p>
<p>The sandbox should also be able to limit the available resources and measure the used ones, like
the execution time and the used memory.</p>
<p>When some events about the execution occur the client is notified via callbacks, the supported
ones are:</p>
<ul>
<li>the start of an execution;</li>
<li>the completion of an execution;</li>
<li>if an execution is skipped because a required file cannot be get (the execution which should
have generated it has failed);</li>
<li>a file has been generated.</li>
</ul>
<h1 id="example" class="section-header"><a href="#example">Example</a></h1>
<p>Creating a simple <a href="struct.Execution.html"><code>Execution</code></a> which will run <code>date</code> to get the current
time. That command will print to <code>stdout</code> the current date, we capture it by calling
<a href="struct.Execution.html#method.stdout"><code>stdout</code></a>. We also bound some callbacks to the DAG, one
for when the execution completes, and one for when the output is ready.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">task_maker_dag</span>::{<span class="ident">ExecutionDAG</span>, <span class="ident">Execution</span>, <span class="ident">ExecutionCommand</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">dag</span> <span class="op">=</span> <span class="ident">ExecutionDAG</span>::<span class="ident">new</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">exec</span> <span class="op">=</span> <span class="ident">Execution</span>::<span class="ident">new</span>(<span class="string">&quot;Get the date&quot;</span>, <span class="ident">ExecutionCommand</span>::<span class="ident">system</span>(<span class="string">&quot;date&quot;</span>));
<span class="kw">let</span> <span class="ident">exec_id</span> <span class="op">=</span> <span class="ident">exec</span>.<span class="ident">uuid</span>;
<span class="kw">let</span> <span class="ident">output</span> <span class="op">=</span> <span class="ident">exec</span>.<span class="ident">stdout</span>();
<span class="ident">dag</span>.<span class="ident">add_execution</span>(<span class="ident">exec</span>);
<span class="ident">dag</span>.<span class="ident">on_execution_done</span>(<span class="kw-2">&amp;</span><span class="ident">exec_id</span>, <span class="op">|</span><span class="ident">result</span><span class="op">|</span> <span class="prelude-val">Ok</span>(<span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;Elapsed time: {} seconds&quot;</span>, <span class="ident">result</span>.<span class="ident">resources</span>.<span class="ident">cpu_time</span>)));
<span class="ident">dag</span>.<span class="ident">get_file_content</span>(<span class="kw-2">&amp;</span><span class="ident">output</span>, <span class="number">1000</span>, <span class="op">|</span><span class="ident">date</span><span class="op">|</span> <span class="prelude-val">Ok</span>(<span class="macro">println</span><span class="macro">!</span>(<span class="string">&quot;The date is: {}&quot;</span>, <span class="ident">std</span>::<span class="ident">str</span>::<span class="ident">from_utf8</span>(<span class="kw-2">&amp;</span><span class="ident">date</span>).<span class="ident">unwrap</span>())));</pre></div>
</div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<table><tr class="module-item"><td><a class="struct" href="struct.Execution.html" title="task_maker_dag::Execution struct">Execution</a></td><td class="docblock-short"><p>An <a href="struct.Execution.html"><code>Execution</code></a> is a process that will be executed by a worker inside a
sandbox. The sandbox will limit the execution of the process (e.g. killing it after a time limit
occurs, or preventing it from reading/writing files).</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionCallbacks.html" title="task_maker_dag::ExecutionCallbacks struct">ExecutionCallbacks</a></td><td class="docblock-short"><p>The callbacks to be called when an event of an execution occurs.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionDAG.html" title="task_maker_dag::ExecutionDAG struct">ExecutionDAG</a></td><td class="docblock-short"><p>A computation DAG, this is not serializable because it contains the callbacks of the client.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionDAGConfig.html" title="task_maker_dag::ExecutionDAGConfig struct">ExecutionDAGConfig</a></td><td class="docblock-short"><p>Configuration setting of an <code>ExecutionDAG</code>, some of the values set here will be inherited in the
configuration of the executions added.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionDAGData.html" title="task_maker_dag::ExecutionDAGData struct">ExecutionDAGData</a></td><td class="docblock-short"><p>Serializable part of the execution DAG: everything except the callbacks (which are not
serializable).</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionGroup.html" title="task_maker_dag::ExecutionGroup struct">ExecutionGroup</a></td><td class="docblock-short"><p>A group of executions that have to be executed concurrently in the same worker. If any of the
executions crash, all the group is stopped. The executions inside the group can communicate
using FIFO pipes provided by the OS.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionInput.html" title="task_maker_dag::ExecutionInput struct">ExecutionInput</a></td><td class="docblock-short"><p>An input file of an <a href="struct.Execution.html"><code>Execution</code></a>, can be marked as executable if it has
to be run inside the sandbox.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionLimits.html" title="task_maker_dag::ExecutionLimits struct">ExecutionLimits</a></td><td class="docblock-short"><p>Limits on an <a href="struct.Execution.html"><code>Execution</code></a>. On some worker platforms some of the fields
may not be supported or may be less accurate.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionResourcesUsage.html" title="task_maker_dag::ExecutionResourcesUsage struct">ExecutionResourcesUsage</a></td><td class="docblock-short"><p>Resources used during the execution, note that on some platform these values may not be
accurate.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionResult.html" title="task_maker_dag::ExecutionResult struct">ExecutionResult</a></td><td class="docblock-short"><p>The result of an <a href="struct.Execution.html"><code>Execution</code></a>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.ExecutionTag.html" title="task_maker_dag::ExecutionTag struct">ExecutionTag</a></td><td class="docblock-short"><p>A tag on an <code>Execution</code>. Can be used to classify the executions into groups and refer to them,
for example for splitting the cache scopes.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.Fifo.html" title="task_maker_dag::Fifo struct">Fifo</a></td><td class="docblock-short"><p>A First-in First-out channel for letting executions communicate inside an execution group. Each
Fifo is identified by an UUID which is unique inside the same <code>ExecutionGroup</code>.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.File.html" title="task_maker_dag::File struct">File</a></td><td class="docblock-short"><p>An handle to a file in the evaluation, this only tracks dependencies between executions.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.FileCallbacks.html" title="task_maker_dag::FileCallbacks struct">FileCallbacks</a></td><td class="docblock-short"><p>The callbacks that will trigger when the file is ready.</p>
</td></tr><tr class="module-item"><td><a class="struct" href="struct.WriteToCallback.html" title="task_maker_dag::WriteToCallback struct">WriteToCallback</a></td><td class="docblock-short"><p>Where to write the file to with some other information.</p>
</td></tr></table><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<table><tr class="module-item"><td><a class="enum" href="enum.CacheMode.html" title="task_maker_dag::CacheMode enum">CacheMode</a></td><td class="docblock-short"><p>The setting of the cache level.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.ExecutionCommand.html" title="task_maker_dag::ExecutionCommand enum">ExecutionCommand</a></td><td class="docblock-short"><p>Command of an <a href="struct.Execution.html"><code>Execution</code></a> to execute.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.ExecutionStatus.html" title="task_maker_dag::ExecutionStatus enum">ExecutionStatus</a></td><td class="docblock-short"><p>Status of a completed <a href="struct.Execution.html"><code>Execution</code></a>.</p>
</td></tr><tr class="module-item"><td><a class="enum" href="enum.ProvidedFile.html" title="task_maker_dag::ProvidedFile enum">ProvidedFile</a></td><td class="docblock-short"><p>A wrapper around a <code>File</code> provided by the client, this means that the client knows the
<code>FileStoreKey</code> and the path to that file if it’s local, or it’s content if it’s generated.</p>
</td></tr></table><h2 id="statics" class="section-header"><a href="#statics">Statics</a></h2>
<table><tr class="module-item"><td><a class="static" href="static.FIFO_SANDBOX_DIR.html" title="task_maker_dag::FIFO_SANDBOX_DIR static">FIFO_SANDBOX_DIR</a></td><td class="docblock-short"><p>Directory inside the sandbox where to place all the pipes of the group. This is used to allow
the sandbox bind-mount all the pipes with a single mount point, inside all the sandboxes of the
group.</p>
</td></tr></table><h2 id="types" class="section-header"><a href="#types">Type Definitions</a></h2>
<table><tr class="module-item"><td><a class="type" href="type.ExecutionGroupUuid.html" title="task_maker_dag::ExecutionGroupUuid type">ExecutionGroupUuid</a></td><td class="docblock-short"><p>The identifier of an execution group, it’s globally unique and it identifies a group during an
evaluation.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.ExecutionUuid.html" title="task_maker_dag::ExecutionUuid type">ExecutionUuid</a></td><td class="docblock-short"><p>The identifier of an execution, it’s globally unique and it identifies an execution only during
a single evaluation.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.FifoUuid.html" title="task_maker_dag::FifoUuid type">FifoUuid</a></td><td class="docblock-short"><p>The identifier of a Fifo pipe inside a group.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.FileUuid.html" title="task_maker_dag::FileUuid type">FileUuid</a></td><td class="docblock-short"><p>The identifier of a file, it’s globally unique and it identifies a file
only during a single evaluation.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.GetContentCallback.html" title="task_maker_dag::GetContentCallback type">GetContentCallback</a></td><td class="docblock-short"><p>Type of the callback called when a file is returned to the client.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.OnDoneCallback.html" title="task_maker_dag::OnDoneCallback type">OnDoneCallback</a></td><td class="docblock-short"><p>Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> ends.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.OnSkipCallback.html" title="task_maker_dag::OnSkipCallback type">OnSkipCallback</a></td><td class="docblock-short"><p>Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> is skipped.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.OnStartCallback.html" title="task_maker_dag::OnStartCallback type">OnStartCallback</a></td><td class="docblock-short"><p>Type of the callback called when an <a href="struct.Execution.html"><code>Execution</code></a> starts.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.Priority.html" title="task_maker_dag::Priority type">Priority</a></td><td class="docblock-short"><p>Type of the priority value of an <code>Execution</code>.</p>
</td></tr><tr class="module-item"><td><a class="type" href="type.WorkerUuid.html" title="task_maker_dag::WorkerUuid type">WorkerUuid</a></td><td class="docblock-short"><p>The identifier of a worker, it’s globally unique and identifies the worker during a single
connection. It is used to associate the jobs to the workers which runs the executions. The
underlying executor may provide more information about a worker using this id.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="task_maker_dag" data-search-js="../search-index.js"></div>
    <script src="../main.js"></script></body></html>